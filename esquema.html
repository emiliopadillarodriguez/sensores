<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Esquema sala de calderas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      margin: 0;
      font-family: system-ui, Arial, sans-serif;
      background: #fafafa;
    }

    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: #fff;
      border-bottom: 1px solid #ddd;
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    header b {
      font-size: 14px;
    }

    button {
      padding: 6px 10px;
      font-size: 13px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background: #f5f5f5;
      cursor: pointer;
    }

    button:hover {
      background: #eaeaea;
    }

    #status {
      margin-left: auto;
      font-size: 12px;
      color: #555;
    }

    /* CONTENEDOR CON SCROLL */
    #viewer {
      width: 100vw;
      height: calc(100vh - 48px);
      overflow: auto;
      background: #fff;
    }

    /* SVG */
    #viewer img {
      display: block;
      max-width: none;   /* MUY IMPORTANTE */
      height: auto;
      transform-origin: top left;
    }
  </style>
</head>

<body>

<header>
  <b>Esquema (SVG)</b>

  <button onclick="zoomIn()">Zoom +</button>
  <button onclick="zoomOut()">Zoom −</button>
  <button onclick="resetZoom()">Reset</button>

  <span id="status">Cargando…</span>
</header>

<div id="viewer">
  <img id="svgImg" alt="Esquema">
</div>

<script>
  const img = document.getElementById("svgImg");
  const statusEl = document.getElementById("status");

  let scale = 1;

  function applyZoom() {
    img.style.transform = `scale(${scale})`;
    statusEl.textContent = `Zoom: ${Math.round(scale * 100)}%`;
  }

  function zoomIn() {
    scale = Math.min(scale * 1.15, 5);
    applyZoom();
  }

  function zoomOut() {
    scale = Math.max(scale / 1.15, 0.2);
    applyZoom();
  }

  function resetZoom() {
    scale = 1;
    applyZoom();
  }

  // Cargar SVG (cache-bust para GitHub Pages)
  const src = "esquema_render.svg?t=" + Date.now();
  img.src = src;

  img.onload = () => {
    statusEl.textContent = "SVG cargado correctamente";
    resetZoom();
  };

  img.onerror = () => {
    statusEl.textContent = "ERROR: No se pudo cargar esquema_render.svg";
  };
</script>

</body>
</html>
